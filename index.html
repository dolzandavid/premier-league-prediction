<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premier League Prediction Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getFirestore, doc, setDoc, getDoc
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyA2WG0LUwLCDqmylgezCZ0aH5Q8vTaXTKU",
      authDomain: "pl-predictor-13a6d.firebaseapp.com",
      projectId: "pl-predictor-13a6d",
      storageBucket: "pl-predictor-13a6d.appspot.com",
      messagingSenderId: "286908896536",
      appId: "1:286908896536:web:dabd76b4faaa72a98cfa6d"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.saveFixtures = async function(gw, fixtures) {
      await setDoc(doc(db, "fixtures", `gw_${gw}`), { fixtures });
    }

    window.getFixtures = async function(gw) {
      const snap = await getDoc(doc(db, "fixtures", `gw_${gw}`));
      return snap.exists() ? snap.data().fixtures : [];
    }

    window.renderFixtures = async function() {
      const gw = document.getElementById("gameWeek").value;
      const container = document.getElementById("fixturesContainer");
      const fixtures = await getFixtures(gw);
      container.innerHTML = fixtures.length === 0 ? "No fixtures." : fixtures.map(f => `<div>${f.home} vs ${f.away}</div>`).join("");
    }

    window.addFixture = async function() {
      const gw = document.getElementById("gameWeek").value;
      const home = prompt("Home team?");
      const away = prompt("Away team?");
      if (!home || !away) return;
      const existing = await getFixtures(gw);
      existing.push({ home, away });
      await saveFixtures(gw, existing);
      renderFixtures();
    }

    document.addEventListener("DOMContentLoaded", () => {
      const gwSelect = document.getElementById("gameWeek");
      for (let i = 1; i <= 38; i++) {
        const opt = document.createElement("option");
        opt.value = i;
        opt.textContent = `Week ${i}`;
        gwSelect.appendChild(opt);
      }
      gwSelect.addEventListener("change", renderFixtures);
      document.getElementById("addFixtureBtn").addEventListener("click", addFixture);
    });
  </script>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-xl mx-auto bg-white shadow p-6 rounded">
    <h1 class="text-2xl font-bold mb-4">Premier League Prediction Game</h1>
    <label for="gameWeek" class="font-semibold">Select Gameweek:</label>
    <select id="gameWeek" class="border p-2 rounded ml-2"></select>
    <button id="addFixtureBtn" class="ml-4 bg-blue-600 text-white px-3 py-1 rounded">Add Fixture</button>
    <div id="fixturesContainer" class="mt-4 text-lg text-gray-800"></div>
  </div>
</body>
</html>
